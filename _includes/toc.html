<!-- _includes/toc.html -->
{% assign headers = include.html | split: '<h' %} <nav class="{{ include.class }}" id="{{ include.id }}">
  <div class="toc-header">
    <span class="toc-title">📑 目录</span>
  </div>
  <ul class="toc-list">
    {% for header in headers %}
    {% if header contains "id=" %}
    {% assign level = header | slice: 0, 1 | plus: 0 %}
    {% if level >= include.h_min and level <= include.h_max %} {% assign id=header | split: 'id="' | last | split: '"' |
      first %} {% assign title=header | split: '</h' | first | split: '>' | last | strip %} <li
      class="toc-item toc-level-{{ level }}">
      <div class="toc-line">
        <a href="#{{ id }}" class="toc-link">
          {{ title }}
        </a>
      </div>
      {% if level == 1 %}
      <div class="toc-divider"></div>
      {% endif %}
      </li>
      {% endif %}
      {% endif %}
      {% endfor %}
  </ul>
  </nav>

  <style>
    /* 目录容器样式 */
    .toc-header {
      padding: 12px 16px;
      background: #f5f7fa;
      border-radius: 6px 6px 0 0;
    }

    .toc-title {
      font-weight: 600;
      color: #2c3e50;
    }

    /* 列表主体样式 */
    .toc-list {
      list-style: none;
      padding: 0;
      margin: 0;
      position: relative;
    }

    /* 层级连接线 */
    .toc-list::before {
      content: "";
      position: absolute;
      left: 18px;
      top: 15px;
      bottom: 15px;
      width: 2px;
      background: linear-gradient(to bottom, #e0e0e0, #e0e0e0 70%, transparent);
    }

    /* 列表项通用样式 */
    .toc-item {
      position: relative;
      padding: 8px 0;
      transition: background 0.2s;
    }

    .toc-item:hover {
      background: #f8f9fa;
    }

    /* 层级缩进控制 */
    .toc-level-1 {
      padding-left: 0;
    }

    .toc-level-2 {
      padding-left: 24px;
    }

    .toc-level-3 {
      padding-left: 48px;
    }

    /* 链接文字样式 */
    .toc-link {
      color: #4a5568;
      text-decoration: none;
      display: block;
      padding: 6px 16px;
      position: relative;
      transition: color 0.2s;
    }

    .toc-link:hover {
      color: #007bff;
    }

    /* 层级标签样式 */
    .toc-level-marker {
      position: absolute;
      right: 16px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 0.8em;
      color: #718096;
      background: #f7fafc;
      padding: 2px 6px;
      border-radius: 4px;
    }

    /* h1标题分隔线 */
    .toc-divider {
      height: 1px;
      background: #e2e8f0;
      margin: 8px 16px;
    }
  </style>